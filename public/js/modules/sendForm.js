import{messageMail}from"./messageMail.js";const formDrive=document.querySelector(".form-test-drive"),sendForm=()=>{formDrive.addEventListener("submit",e=>{e.preventDefault();let r={};for(var{name:n,value:t}of formDrive.elements)n&&(r[n]=t);const o=document.querySelector(".error_one");if(""===r.name||" "===r.name)return!(o.innerHTML="Заполните поле «Имя»");if(r.name.length<3)return!(o.innerHTML="Ваше имя слишком короткое");o.innerHTML="";const s=document.querySelector(".error_two");if(null!=r.mail&&0===r.mail.length)return!(s.innerHTML="Заполните поле «Электронная почта»");if(!/^\w+[-_\.]*\w+@\w+-?\w+\.[a-z]{2,4}$/.test(r.mail))return!(s.innerHTML="Введите правильный адрес электронный почты");s.innerHTML="";const i=document.querySelector(".error_three");return null!=r.phone&&0===r.phone.length?!(i.innerHTML="Введите номер телефона"):r.phone.length<7?!(i.innerHTML="Номер телефона слишком короткий"):(i.innerHTML="",void fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(r)}).then(e=>{if(200===e.status||201===e.status)return e.json();throw new Error(e.status)}).then(e=>{messageMail(),formDrive.reset()}).catch(e=>{alert("Произошла ошибка, статус"+e.message)}))})};export{sendForm};